<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/myList.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!--<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
-->
    
    <title>myList</title>
</head>
<body>
    <p id="placeholder">Click &#9744; to begin</p>
    <section id="top">
        <button id="menuBtn" type="button">&#9776;</button>
        <h1 id="title">Power Worker</h1>
    </section>
    <section id="mid">    
    <div id="menu" class="menuVis">
        <button type="button" id="WOitems" class="menuVis">&#9744;</button>
        <button type="button" id="Techitems" class="menuVis">&#9745;</button>
        <button type="button" id="Dateitems" class="menuVis">&#9746;</button>
    </div>
    <div id="UIcont">
    <article id="card1" class="card menuVis">
        <p id="Ord" class="test">ORDERS</p>
    </article>
    <article id="card2" class="card menuVis">
        <p id="Wor" class="test">WORKERS</p>
    </article>
    <article id="card3" class="card menuVis">
        <p id="Dat" class="test">DATE</p>
    </article>
    </div>
</section>
<footer>
    <p class="instruct">Click on the Order icon or card to get started.</p>
</footer>
</body>
<script>
    //global const
    const alert = $("#placeholder");
    const menu = $("#menuBtn");
    const WO =  $("#WOitems , #card1");
    const WOCard = $("#card1 p");
    const Tech = $("#Techitems , #card2");
    const TechCard = $("#card2 p");
    const Date = $("#Dateitems , #card3");
    const DateCard = $("#card3 p");
    //const arrays
    const main = ["Orders", "Workers"]
    const WOarr = ["Add", "View", "Exit"];
    const Techarr = ["Admin", "View", "Exit"];
    const Datearr = ["Clear all WOs", "Clear all Techs", "Exit"];
    //var arrays that hold strings
    let WOList = [];
    let TechList = [];
    //html arrays holding constructors-ish
    let WOCardList = [];
    let TechCardList = [];
    //global vars
    var noData = true;
    var noWO = true;
    var noTech = true;
    var noDate = true;
    
    $("document").ready(normalOp());
    function TopAlert(a, b){
        console.log("error has occured");
        if(a == 0){
            alert.show();
            alert.text(`${b}`);
            console.log(b);
        }
    }
    function WOmenu(){
        $(".instruct").show();
        Date.show();
        Tech.show();
        var footer = "&#9744; to Create Work Order<br>&#9745; to Assign<br>"+
        "&#9746; to Exit";
        
        $(".instruct").html(footer);
        WOCard.text(WOarr[0]);
        TechCard.text(WOarr[1]);
        DateCard.text(WOarr[2]);
        WO.on('click', function () {
            //send to normal function
            Add(1);
        });
        Tech.on('click', function () {
            if(noWO){
                TopAlert(0, "Nothing to View! click Add!");
            }
            //send to normal function
        })
        Date.on('click', function () {
            normalOp();
            //send to normal function
        })
    }
    //this var will keep user from exiting menu until they pick an option.
    function normalOp(){
        WOCard.html(main[0]);
        Tech.hide();
        Date.hide();
        
    menu.on('click', function(){
        if(noData){
            TopAlert(0,"No WO's exsist, can not close menu")
        }
            $(".menuVis").fadeToggle('slow');
            alert.hide();
        })
    WO.on('click', function(){
        console.log("Orders menu");
        alert.hide();
        WOmenu();
    })
    Tech.on('click', function () {
        if(noData){
            TopAlert(0, "No WO's found, Locked!");
        }
        console.log("Tech menu");
        alert.hide();
        })
    Date.on('click', function () {
        if (noData) {
            TopAlert(0, "No WO's found, Locked!");
        }
        console.log("Date menu");
        alert.hide();
        })
    }

    function Add(mod){
        alert.hide();
        $("#card1, #card2, #card3").hide();
        $(".instruct").hide();
        let a;
        let b;
        let c;
        let formCard = $("#UIcont"); //for form
        const form = `<article id="card0" class="card">
        
    <form id="WOf">
        <label class = "WOlabel">Work Name:</label>
        <input autofocus class = "WOinput text" type="text">
        <input id = "formSubmit" class= "WOinput WOfBtn" type = "button" value="Submit"> 
        <input class = "WOinput WOfBtn" type= "reset">
        </form>
        </article>`;
        if(mod == 1){
        formCard.append(`${form}`);
        $("#formSubmit").on('click', function(){
            let a = WOList.length;
            let b = $(".text").val();
            let c = 100 + WOList.length;
            WOList[a] = b;
            const model = `<article id="card${a}" class="card">
            < p id = "${b}" class= "" >WO: ${b}</p >
            <p id="${c}" class="">WO#: ${c} </p>
            </article > `;
            WOCardList[a] = model;
            $("#card0").remove();
            console.log(`${a} + ${b} + ${c} ${WOList} ${WOCardList}`);
            $("#card1, #card2, card#3").toggle();
            WOmenu();
        })
    }
        
    }
        
    
</script>
</html>